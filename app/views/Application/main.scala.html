@(title: String, fluid: Boolean = false)(content: Html)

@import be.objectify.deadbolt.java.views.html._
@import be.objectify.deadbolt.core.utils.TemplateUtils._
@import helpers.SessionHelper

<!DOCTYPE html>
<html>
  <head>
    <title>@title</title>
    <!-- Prefer Chrome Frame when available for Internet Explorer -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <!-- For phones and tablets -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Modernizr detects browser features -->
    <script src="//cdn.jsdelivr.net/modernizr/2.6.2/modernizr.min.js"></script>
    <!-- jQuery -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <!-- Bootstrap stylesheets -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.no-icons.min.css" rel="stylesheet"/>
    <!-- Icon set -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Functional programming support library (required by Backbone.js) -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js" type="text/javascript"></script>
    <!-- String function plugin for Underscore.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/underscore.string/2.3.0/underscore.string.min.js" type="text/javascript"></script>
    <!-- Client-side application framework (views, models, routers, etc) -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js" type="text/javascript"></script>
    <!-- Common use-case helper for Backbone.js -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/backbone.marionette/1.0.1-bundled/backbone.marionette.min.js" type="text/javascript"></script>
    <!-- Client-side templating -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/dustjs-linkedin/1.2.0/dust-core.min.js"></script>
    <!-- For some settings we need to read/write cookies client-side -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.3.1/jquery.cookie.min.js"></script>
    <script type="text/javascript">
    Modernizr.load([{
      // Placeholders don't exist in IE, so shim them
      test: Modernizr.input.placeholder,
      nope: '//cdnjs.cloudflare.com/ajax/libs/jquery-placeholder/2.0.7/jquery.placeholder.min.js',
      complete: function () {
        $(function() {
          if ($().placeholder) {
            $('input, textarea').placeholder();
          }
        });
      }
    },{
      // Components for Bootstrap
      load: "//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js",
      complete: function() {
        $(function() {
          $('[rel="tooltip"]').tooltip();
          $('a[rel="back"]').click(function(event) {
            event.preventDefault();
            if (window.history.previous) {
              window.history.back();
            } else {
              window.location.pathname = "@routes.Application.index()";
              window.location.hash = "#";
            }
          });
        });
      }
    }]);
    </script>
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("css/main.css")"/>
    <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")"/>
    <!--[if lte IE 8]>
    <link href="//netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome-ie7.min.css" rel="stylesheet">
    <![endif]-->
    @defining(play.Play.application.configuration.getString("ga.key")) { analyticsKey =>
      @analyticsKey match {
        case null => { <!-- No analytics key --> }
        case k: String => {
          <script type="text/javascript">
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', '@k']);
            _gaq.push(['_trackPageview']);

            (function() {
              var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
              ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
              var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
          </script>
        }
      }
    }
  </head>
  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          @subjectPresent() {
            <ul id="nav-back" class="nav">
              <li>
                <a href="#" rel="back">
                  <i class="icon-double-angle-left icon-large"></i>
                </a>
              </li>
              <li class="divider-vertical"></li>
            </ul>
          }
          <a class="brand" href="/"
             title="Automated Online Reef Report card Application">
            AORRA
          </a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              @subjectPresent() {
                <li><a href="/invite">Invite New User</a></li>
              }
            </ul>
            <ul class="nav pull-right">
              @subjectPresent() {
                @defining(SessionHelper.currentUser) { currentUser =>
                  <li class="dropdown">
                    <a href="#" class="dropdown-toggle"
                      role="button"
                      data-toggle="dropdown"
                      title="Currently logged-in user">
                      <i class="icon-user"></i>
                      @currentUser.getName()
                      <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                      <li>
                        <a href="#" rel="tooltip"
                          role="menu"
                          data-placement="top"
                          title="All emails will be sent to this address.">
                          <em>@currentUser.getEmail()</em>
                        </a>
                      </li>
                      <li class="divider"></li>
                      <li><a href="/logout">Logout</a></li>
                    </ul>
                  </li>
                }
              }
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="visible-desktop" style="height: 60px;"></div>

    <div class="@(if (fluid) "container-fluid" else "container")">
    <div class="row-fluid" id="content">
    @content
    </div>
    </div>
  </body>
</html>
