/*! glyphtree 0.0.1 2013-04-10 */
/*!
#     Copyright (c) 2013 The University of Queensland
#     MIT Licence - see COPYING for details.
*/
(function(){var t,e,n,i,r=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};i=function(t,e){return e.isLeaf()?void 0:e.isExpanded()?e.collapse():e.expand()},e=function(){return{classPrefix:"glyphtree-",startExpanded:!1,events:{icon:{click:[i]},label:{click:[i]}},types:{"default":{icon:{"default":{content:"▶"},leaf:{content:"•"},expanded:{content:"▼"}}}},typeResolver:function(t){return t.type}}},n=function(t,e){var n,i,s;if(n=null!=(s=this.jQuery)?s:this.$,n===void 0)throw Error("GlyphTree requires jQuery (or a compatible clone).");return i=function(){function t(t,i){var r;this.element=t,this._options=i,r=Math.floor(Math.random()*Math.pow(2,32)).toString(16),this.idClass=this._options.classPrefix+"id"+r,n(this.element).addClass(this.idClass),this.classResolver=new e(this._options.classPrefix),this.resolveType=this._options.typeResolver,this._styleElement=this.setupStyle(),this.events=this._options.events,this.startExpanded=this._options.startExpanded}var e,i,s;return t.prototype.setupStyle=function(){var t;return t=n("<style/>"),t.attr("type","text/css"),t.text(this.getStyle()),n("body").append(t),t},t.prototype.getStyle=function(){var t,e,n,i,r,s,o=this;return e=this.classResolver,i=function(t,e){return e.match(/^(#|rgb|\d)/)?""+t+": "+e+";":""+t+': "'+e+'";'},r=function(t,n){var r,s,l,h,u,a;return s=function(t){return"default"===t?"":"."+e.state(t)},u=function(t){return"default"===t?"":"."+e.type(t)},l=function(t,e){return s(t)+u(e)},function(){var s,o,u,p;for(u=["default","leaf","expanded"],p=[],s=0,o=u.length;o>s;s++)h=u[s],n.icon[h]&&p.push("."+this.idClass+" ul li."+e.node()+l(h,t)+":before {"+function(){var t,e;t=n.icon[h],e=[];for(r in t)a=t[r],e.push(i(r,a));return e}().join(" ")+"}");return p}.call(o).join("\n")+"\n"+("."+o.idClass+" ul li."+e.node()+l("default",t)+" > ul."+e.tree()+" {\n  display: none;\n}\n."+o.idClass+" ul li."+e.node()+l("expanded",t)+" > ul."+e.tree()+" {\n  display: block;\n}")},t="."+this.idClass+" ul {\n  list-style-type: none;\n}\n."+this.idClass+" ul li."+e.node()+" {\n  cursor: pointer;\n}\n."+this.idClass+" ul li."+e.node()+":before {\n  width: 1em;\n  text-align: center;\n  display: inline-block;\n  padding-right: 1ex;\n  speak: none;\n}",t+"\n"+function(){var t,e;t=this._options.types,e=[];for(n in t)s=t[n],e.push(r(n,s));return e}.call(this).join("\n")},t.prototype.load=function(t){var e;return this._setRootContainer(new s(function(){var n,r,s;for(s=[],n=0,r=t.length;r>n;n++)e=t[n],s.push(new i(e,this));return s}.call(this),this)),this},t.prototype.add=function(t,e){return null!=e?this.find(e).addChild(new i(t,this)):(null==this.rootNodes&&this._setRootContainer(new s([],this)),this.rootNodes.add(new i(t,this))),this},t.prototype.update=function(t){var e,n;if(n=t.id,null==n)throw Error("Cannot update without provided ID");return e=this.find(n),e&&e.update(t),this},t.prototype.remove=function(t){var e;return e=this.find(t),null!=e&&e.remove(),this},t.prototype.expandAll=function(){return this.walk(function(t){return t.expand()})},t.prototype.collapseAll=function(){return this.walk(function(t){return t.collapse()})},t.prototype.find=function(t){var e,n,i,r;for(r=this.nodes(),n=0,i=r.length;i>n;n++)if(e=r[n],e.id===t)return e;return null},t.prototype.nodes=function(){var t;return t=[],this.walk(function(e){return t.push(e)}),t},t.prototype.walk=function(t){return this.rootNodes.empty()||this.rootNodes.walkNodes(t),this},t.prototype._setRootContainer=function(t){return this.rootNodes=t,n(this.element).empty(),n(this.element).append(t.element()),this},i=function(){function t(e,n){var i,r,o;this.tree=n,this._cr=this.tree.classResolver,this.id=e.id,this.name=e.name,this.type=this.tree.resolveType(e),this.attributes=e.attributes,r=e.children?function(){var n,r,s,o;for(s=e.children,o=[],n=0,r=s.length;r>n;n++)i=s[n],o.push(new t(i,this.tree));return o}.call(this):[],this.children=new s(r,this.tree),o=this._cr.state("expanded"),this.isExpanded=function(){return this.element().hasClass(o)},this.expand=function(){return this.element().addClass(o)},this.collapse=function(){return this.element().removeClass(o)}}return t.prototype.addChild=function(t){var e;return e=this.isLeaf(),this.children.add(t),e?this.element().append(this.children.element()):void 0},t.prototype.update=function(t){var e;return this.id=t.id,this.name=t.name,e=this.type,this.type=this.tree.resolveType(t),this.attributes=t.attributes,this._rebuildElement(e),this},t.prototype.remove=function(){return this.container.remove(this)},t.prototype.element=function(){return this._element||(this._element=this._buildElement())},t.prototype.isLeaf=function(){return this.children.empty()},t.prototype._buildElement=function(){var t,e;return e=n("<li/>").addClass(this._cr.node()).addClass(this._cr.type(this.type)),t=n("<span/>").addClass(this._cr.node("label")).text(this.name),e.append(t),this.isLeaf()?e.addClass(this._cr.state("leaf")):e.append(this.children.element()),this.tree.startExpanded&&e.addClass(this._cr.state("expanded")),this._attachEvents(e,"icon"),this._attachEvents(t,"label"),e},t.prototype._rebuildElement=function(t){var e;return null!=this._element?(t!==this.type&&(this._element.removeClass(this._cr.type(t)),this._element.addClass(this._cr.type(this.type))),e=this._element.children("."+this._cr.node("label")),e.text(this.name)):this.element()},t.prototype._attachEvents=function(t,e){var n,i=this;return n="click\nkeydown\nkeypress\nkeyup\nmouseover\nmouseout".replace(/\s+/gm," ").trim(),t.on(n,function(t){var n,r,s,o,l;if(null!=i.tree.events[e][t.type]&&t.currentTarget===t.target){for(o=i.tree.events[e][t.type],l=[],r=0,s=o.length;s>r;r++)n=o[r],l.push(n(t,i));return l}})},t}(),s=function(){function t(t,e){var n,i,r,s;for(this.nodes=t,this._cr=e.classResolver,s=this.nodes,i=0,r=s.length;r>i;i++)n=s[i],n.container=this}return t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.add=function(t){return this.nodes.push(t),this._rebuildElement()},t.prototype.remove=function(t){if(r.call(this.nodes,t)>=0)return t.element().remove(),this.nodes=this.nodes.filter(function(e){return e!==t});throw Error("Node not in this container")},t.prototype.element=function(){return this._element||(this._element=this._buildElement())},t.prototype._buildElement=function(){var t,e;return t=n("<ul/>"),t.addClass(this._cr.tree()),t.append(function(){var t,n,i,r;for(i=this.nodes,r=[],t=0,n=i.length;n>t;t++)e=i[t],r.push(e.element());return r}.call(this)),t},t.prototype._rebuildElement=function(){var t,e,n,i;if(null!=this._element){for(i=this.nodes,e=0,n=i.length;n>e;e++)t=i[e],t.element().detach();return this._element.append(function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.element());return r}.call(this))}return this.element()},t.prototype.walkNodes=function(t){var e,n,i,r,s;for(s=this.nodes,i=0,r=s.length;r>i;i++)e=s[i],n=t(e),e.children.empty()||e.children.walkNodes(t);return void 0},t}(),e=function(){function t(t){this.prefix=t}return t.prototype.node=function(t){return t?this.node()+"-"+t:this.prefix+"node"},t.prototype.tree=function(){return this.prefix+"tree"},t.prototype.type=function(t){return this.prefix+"type-"+(null!=t?t:"default")},t.prototype.state=function(t){return this.prefix+t},t}(),t}(),new i(t,e)},t=function(t){var i,r;return r=e(),i=function(t,e){var n,r,s;n={};for(r in e)s=e[r],n[r]=s;for(r in t)s=t[r],n[r]="object"==typeof n[r]?i(s,n[r]):s;return n},t.glyphtree=function(e,s){return n.call(t,e,i(null!=s?s:{},r))},t.glyphtree.options=r,t.glyphtree},"undefined"!=typeof exports&&null!==exports?exports.create=function(e){return t(e)}:t(this)}).call(this);
//@ sourceMappingURL=build/glyphtree.min.map